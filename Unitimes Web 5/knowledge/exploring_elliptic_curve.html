<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="always">
    <meta name="robots" content="index, follow">
    <link rel="icon" href="about:blank" type="image/x-icon">

    <title>
        Exploring Elliptic Curve Pairings
    </title>

    <meta name="title" content="Exploring Elliptic Curve Pairings">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <link rel="stylesheet" type="text/css" href="../css/article-font.css">
    <link rel="stylesheet" href="../css/article.min.css">        <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109516558-1"></script>
    <script>        window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-109516558-1');
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?dc9c3afdb0d4ee781a538922a7c9aaa9";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();    </script>
</head>

<body class="browser-chrome os-mac is-withMagicUnderlines v-glyph v-glyph--m2 v-enableBrandingButtons is-js postShowScreen">
<div class="site-main surface-container">
    <div class="surface">
        <div class="screenContent surface-content">
            <div class="metabar u-clearfix  u-boxShadowBottomThinLighter u-textColorDarker u-fixed u-backgroundTransparentWhiteDarkest u-xs-sizeFullViewportWidth u-tintBgColor u-tintSpectrum">
                <div class="metabar-inner u-marginAuto u-maxWidth1000 u-flexCenter u-justifyContentSpaceBetween u-paddingLeft20 u-paddingRight20 u-height65 u-xs-height56">
                    <div class="metabar-block u-flex1 u-flexCenter">
                        <a href="../index.html" class="link u-flex">
                            <img src="../images/icon/logo_black.svg" height="25px">
                        </a>
                    </div>
                    <div class="metabar-block u-flex0 u-flexCenter">
                        <div class="u-alignMiddle u-inlineBlock u-verticalAlignTop u-height65 u-xs-height56">
                            <div class="u-alignBlock">
                                <div class="buttonSet buttonSet--wide u-lineHeightInherit">
                                    <!--<a class="button button&#45;&#45;primary button&#45;&#45;dark button&#45;&#45;chromeless u-accentColor&#45;&#45;buttonDark is-inSiteNavBar u-xs-hide js-signInButton" href="#">-->
                                    <!--中文</a>-->
                                    <a class="button button--primary button--dark button--withChrome u-accentColor--buttonDark is-inSiteNavBar"
                                       href="exploring_elliptic_curve_cn.html" style="font-size: 14px">
                                        中文</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="metabar-inner u-marginAuto u-maxWidth1000">
                    <nav role="navigation" class="metabar-block metabar-block--below u-overflowHiddenY u-height40">
                        <ul class="u-textAlignLeft u-noWrap u-overflowX u-paddingBottom100 u-sm-paddingLeft20 u-sm-paddingRight20">
                            <li class="metabar-navItem u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10">
                                <a class="link link--darken u-accentColor--textDarken  "
                                   href="../unitalks.html"> Unitalks </a></li>
                            <li class="metabar-navItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10">
                                <a class="link link--darken u-accentColor--textDarken link--noUnderline "
                                   href="../news.html"> News </a></li>
                            <li class="metabar-navItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10">
                                <a class="link link--darker link--darken u-accentColor--textDarken link--noUnderline "
                                   href="../knowledge.html"> Knowledge </a></li>
                            <li class="metabar-navItem  u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10">
                                <a class="link link--darken u-accentColor--textDarken link--noUnderline "
                                   href="../events.html"> Events </a></li>
                            <span class="u-borderLeft1 u-paddingLeft22 u-xs-paddingLeft12 u-baseColor--borderLight"></span>
                            <li class="metabar-navItem  is-external u-uiTextMedium u-fontSize14 u-inlineBlock u-textUppercase u-letterSpacing003 u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-paddingTop5 u-xs-paddingTop10">
                                <a class="link link--darken u-accentColor--textDarken link--noUnderline "
                                   href="../index.html"> Home </a></li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="metabar metabar--spacer u-tintBgColor u-height105 u-xs-height95"></div>
            <main role="main">
                <article
                        class="u-minHeight100vhOffset65 u-overflowHidden postArticle postArticle--full is-withAccentColors"
                        lang="en" data-scroll="native">
                    <header class="container u-maxWidth740">
                        <div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaHeader u-paddingBottom10 row">
                            <div class="col u-size12of12">
                                <div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaLockup postMetaLockup--authorWithBio u-flexCenter">
                                    <div class="u-flex0">
                                        <!--<a class="link avatar u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                        <img src="../images/knowledge/vitalik-Buterin.jpeg" width="50px" height="50px"
                                             class="avatar-image">
                                        <!--</a>-->
                                    </div>
                                    <div class="u-flex1 u-paddingLeft15 u-overflowHidden">
                                        <div class="u-lineHeightTightest">
                                            Vitalik Buterin
                                        </div>
                                        <div class="ui-caption postMetaInline">
                                            <time>2 May, 2017</time>
                                            <!--<span class="middotDivider u-fontSize12"></span>-->
                                            <!--<span class="readingTime"title="3 min read"></span>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>
                    <div class="postArticle-content" data-scroll="native">
                        <section class="section section--body section--first">
                            <div class="section-content">
                                <div class="section-inner sectionLayout--insetColumn">
                                    <h1 class="graf graf--h3 graf--leading graf--title">
                                        Exploring Elliptic Curve Pairings
                                    </h1>
                                    <p class="graf graf--p graf-after--h3"><strong
                                            class="markup--strong markup--p-strong">Trigger warning: math.</strong></p>
                                    <img class="graf--p graf-image u-marginTop40" src="../images/knowledge/z3-thumb.jpg"
                                         width="100%">

                                    <p class="graf graf--p graf-after--p">One of the key
                                        cryptographic primitives behind various constructions, including deterministic
                                        threshold signatures, zk-SNARKs and other simpler forms of zero-knowledge proofs
                                        is the elliptic curve pairing. Elliptic curve pairings (or “bilinear maps”) are
                                        a recent addition to a 30-year-long history of using elliptic curves for
                                        cryptographic applications including encryption and digital signatures; pairings
                                        introduce a form of “encrypted multiplication”, greatly expanding what elliptic
                                        curve-based protocols can do. The purpose of this article will be to go into
                                        elliptic curve pairings in detail, and explain a general outline of how they
                                        work.</p>
                                    <p class="graf graf--p graf-after--p graf--trailing">You’re
                                        not expected to understand everything here the first time you read it, or even
                                        the tenth time; this stuff is genuinely hard. But hopefully this article will
                                        give you at least a bit of an idea as to what is going on under the hood.</p>
                                    <p class="graf graf--p graf--leading">Elliptic curves themselves are very much a
                                        nontrivial topic to understand, and this article will generally assume that you
                                        know how they work; if you do not, I recommend this article here as a primer: <a
                                                href="https://blog.cloudflare.com/a-relatively-easy-to-understand-primer-on-elliptic-curve-cryptography/"
                                                class="markup--anchor markup--p-anchor">https://blog.cloudflare.com/a-relatively-easy-to-understand-primer-on-elliptic-curve-cryptography/</a>.
                                        As a quick summary, elliptic curve cryptography involves mathematical objects
                                        called “points” (these are literal two-dimensional points with (x, y)
                                        coordinates), with special formulas for adding and subtracting them (ie. for
                                        calculating the coordinates of R = P + Q), and you can also multiply a point by
                                        an integer (ie. P * n = P + P +&nbsp;… + P, though there’s a much faster way to
                                        compute it if n is big).</p>

                                    <img class="graf--p graf-image"
                                         src="../images/knowledge/1-2PxXNwMceh1XC_waAP9NiA(1).jpeg" width="50%">
                                    <p class="imageCaption">Here’s how point addition looks like
                                        graphically.
                                    </p>
                                    <p class="graf graf--p graf-after--figure">There exists a special point called the
                                        “point at infinity” (O), the equivalent of zero in point arithmetic; it’s always
                                        the case that P + O = P. Also, a curve has an “<strong
                                                class="markup--strong markup--p-strong">order</strong>”; there exists a
                                        number n such that P * n = O for any P (and of course, P * (n+1) = P, P * (7*n +
                                        5) = P * 5, and so on). There is also some commonly agreed upon “generator
                                        point” G, which is understood to in some sense represent the number 1.
                                        Theoretically, any point on a curve (except O) can be G; all that matters is
                                        that G is standardized.</p>
                                    <p class="graf graf--p graf-after--p">Pairings go a step further in that they allow
                                        you to check certain kinds of more complicated equations on elliptic curve
                                        points — for example, if P = G * p, Q = G * q and R = G * r, you can check
                                        whether or not p * q = r, having just P, Q and R as inputs. This might seem like
                                        the fundamental security guarantees of elliptic curves are being broken, as
                                        information about p is leaking from just knowing P, but it turns out that the
                                        leakage is highly contained — specifically, the <a
                                                href="https://en.wikipedia.org/wiki/Decisional_Diffie%E2%80%93Hellman_assumption"
                                                class="markup--anchor markup--p-anchor"
                                        >decisional Diffie Hellman problem</a> is easy, but the
                                        computational Diffie Hellman problem (knowing P and Q in the above example, <em
                                                class="markup--em markup--p-em">computing</em> R = G * p * q) and the <a
                                                href="https://en.wikipedia.org/wiki/Discrete_logarithm"
                                                class="markup--anchor markup--p-anchor"
                                        >discrete logarithm problem</a> (recovering p from P)
                                        remain computationally infeasible (at least, if they were before).</p>
                                    <p class="graf graf--p graf-after--p">A third way to look at what pairings do, and
                                        one that is perhaps most illuminating for most of the use cases that we are
                                        about, is that if you view elliptic curve points as one-way encrypted numbers
                                        (that is, encrypt(p) = p * G = P), then whereas traditional elliptic curve math
                                        lets you check <em class="markup--em markup--p-em">linear</em> constraints on
                                        the numbers (eg. if P = G * p, Q = G * q and R = G * r, checking 5 * P + 7 * Q =
                                        11 * R is <em class="markup--em markup--p-em">really</em> checking that 5 * p +
                                        7 * q = 11 * r), pairings let you check <em class="markup--em markup--p-em">quadratic</em>
                                        constraints (eg. checking e(P, Q) * e(G, G * 5) = 1 is <em
                                                class="markup--em markup--p-em">really</em> checking that p * q + 5 =
                                        0). And going up to quadratic is enough to let us work with deterministic
                                        threshold signatures, quadratic arithmetic programs and all that other good
                                        stuff.</p>
                                    <p class="graf graf--p graf-after--p">Now, what is this funny e(P, Q) operator that
                                        we introduced above? This is the pairing. Mathematicians also sometimes call it
                                        a <em class="markup--em markup--p-em">bilinear map</em>; the word “bilinear”
                                        here basically means that it satisfies the constraints:</p>
                                    <p class="graf graf--p graf-after--p">e(P, Q + R) = e(P, Q) * e(P, R)</p>
                                    <p class="graf graf--p graf-after--p">e(P + S, Q) = e(P, Q) * e(S, Q)</p>
                                    <p class="graf graf--p graf-after--p">Note that + and * can be arbitrary operators;
                                        when you’re creating fancy new kinds of mathematical objects, abstract algebra
                                        doesn’t care how + and * are <em class="markup--em markup--p-em">defined</em>,
                                        as long as they are consistent in the usual ways, eg. a + b = b + a, (a * b) * c
                                        = a * (b * c) and (a * c) + (b * c) = (a + b) * c.</p>
                                    <p class="graf graf--p graf-after--p">If P, Q, R and S were simple <em
                                            class="markup--em markup--p-em">numbers</em>, then making a simple pairing
                                        is easy: we can do e(x, y) = 2^xy. Then, we can see:</p>
                                    <p class="graf graf--p graf-after--p">e(3, 4+ 5) = 2^(3 * 9) = 2²⁷</p>
                                    <p class="graf graf--p graf-after--p">e(3, 4) * e(3, 5) = 2^(3 * 4) * 2^(3 * 5) =
                                        2¹² * 2¹⁵ = 2²⁷</p>
                                    <p class="graf graf--p graf-after--p">It’s bilinear!</p>
                                    <p class="graf graf--p graf-after--p graf--trailing">However, such simple pairings
                                        are not suitable for cryptography because the objects that they work on are
                                        simple integers and are too easy to analyze; integers make it easy to divide,
                                        compute logarithms, and make various other computations; simple integers have no
                                        concept of a “public key” or a “one-way function”. Additionally, with the
                                        pairing described above you can go backwards - knowing x, and knowing e(x, y),
                                        you can simply compute a division and a logarithm to determine y. We want
                                        mathematical objects that are as close as possible to “black boxes”, where you
                                        can add, subtract, multiply and divide, <em class="markup--em markup--p-em">but
                                            do nothing else</em>. This is where elliptic curves and elliptic curve
                                        pairings come in.</p>
                                    <p class="graf graf--p graf--leading">It turns out that it is possible to make a
                                        bilinear map over elliptic curve points — that is, come up with a function e(P,
                                        Q) where the inputs P and Q are elliptic curve points, and where the output is
                                        what’s called an F_p¹² element (at least in the specific case we will cover
                                        here; the specifics differ depending on the details of the curve, more on this
                                        later), but the math behind doing so is quite complex.</p>
                                    <p class="graf graf--p graf-after--p">First, let’s cover prime fields and extension
                                        fields. The pretty elliptic curve in the picture earlier in this post only looks
                                        that way if you assume that the curve equation is defined using regular real
                                        numbers. However, if we actually use regular real numbers in cryptography, then
                                        you can use logarithms to “go backwards”, and everything breaks; additionally,
                                        the amount of space needed to actually store and represent the numbers may grow
                                        arbitrarily. Hence, we instead use numbers in a <strong
                                                class="markup--strong markup--p-strong">prime field</strong>.</p>
                                    <p class="graf graf--p graf-after--p">A prime field consists of the set of numbers
                                        0, 1, 2… p-1, where p is prime, and the various operations are defined as
                                        follows:</p>
                                    <pre
                                            class="graf graf--pre graf-after--p">a + b:  (a + b) % p<br>a * b:  (a * b) % p<br>a - b:  (a - b) % p<br>a / b:  (a * b^(p-2)) % p</pre>
                                    <p class="graf graf--p graf-after--pre">Basically, all math is done modulo p (see <a
                                            href="https://www.khanacademy.org/computing/computer-science/cryptography/modarithmetic/a/what-is-modular-arithmetic"
                                            class="markup--anchor markup--p-anchor"
                                    >here</a> for an introduction to modular math). Division is a
                                        special case; normally, 3/2 is not an integer, and here we want to deal only
                                        with integers, so we instead try to find the number x such that x * 2 = 3, where
                                        * of course refers to modular multiplication as defined above. Thanks to <a
                                                href="https://en.wikipedia.org/wiki/Fermat%27s_little_theorem"
                                                class="markup--anchor markup--p-anchor"
                                        >Fermat’s little theorem</a>, the exponentiation trick
                                        shown above does the job, but there is also a faster way to do it, using the <a
                                                href="https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm"
                                                class="markup--anchor markup--p-anchor"
                                        >Extended Euclidean Algorithm</a>. Suppose p = 7; here
                                        are a few examples:</p>
                                    <pre
                                            class="graf graf--pre graf-after--p">2 + 3 = 5 % 7 = 5<br>4 + 6 = 10 % 7 = 3<br>2 - 5 = -3 % 7 = 4<br>6 * 3 = 18 % 7 = 4<br>3 / 2 = (3 * 2^5) % 7 = 5<br>5 * 2 = 10 % 7 = 3</pre>
                                    <p class="graf graf--p graf-after--pre">If you play around with this kind of math,
                                        you’ll notice that it’s perfectly consistent and satisfies all of the usual
                                        rules. The last two examples above show how (a / b) * b = a; you can also see
                                        that (a + b) + c = a + (b + c), (a + b) * c = a * c + b * c, and all the other
                                        high school algebraic identities you know and love continue to hold true as
                                        well. In elliptic curves in reality, the points and equations are usually
                                        computed in prime fields.</p>
                                    <p class="graf graf--p graf-after--p">Now, let’s talk about <strong
                                            class="markup--strong markup--p-strong">extension fields</strong>. You have
                                        probably already seen an extension field before; the most common example that
                                        you encounter in math textbooks is the field of complex numbers, where the field
                                        of real numbers is “extended” with the additional element sqrt(-1) = i.
                                        Basically, extension fields work by taking an existing field, then “inventing” a
                                        new element and defining the relationship between that element and existing
                                        elements (in this case, i² + 1 = 0), making sure that this equation does not
                                        hold true for any number that is in the original field, and looking at the set
                                        of all linear combinations of elements of the original field and the new element
                                        that you have just created.</p>
                                    <img class="graf--p graf-image"
                                         src="../images/knowledge/1-qDOPI299SKvZuzeNnik4JA(1).png" width="30%">

                                    <p class="graf graf--p graf-after--figure">We can do extensions of prime fields too;
                                        for example, we can extend the prime field mod 7 that we described above with i,
                                        and then we can do:</p>
                                    <pre class="graf graf--pre graf-after--p">(2 + 3i) + (4 + 2i) = 6 + 5i<br>(5 + 2i) + 3 = 1 + 2i<br>(6 + 2i) * 2 = 5 + 4i<br>4i * (2 + i) = 3 + i</pre>
                                    <p class="graf graf--p graf-after--pre">That last result may be a bit hard to figure
                                        out; what happened there was that we first decompose the product into 4i * 2 +
                                        4i * i, which gives 8i - 4, and then because we are working in mod 7 math that
                                        becomes i + 3. To divide, we do:</p>
                                    <pre class="graf graf--pre graf-after--p">a / b:  (a * b^(p^2-2)) % p</pre>
                                    <p class="graf graf--p graf-after--pre">Note that the exponent for Fermat’s little
                                        theorem is now p² instead of p, though once again if we want to be more
                                        efficient we can also instead extend the Extended Euclidean Algorithm to do the
                                        job. Note that x^(p² - 1) = 1 for any x in this field, so we call p² - 1 the
                                        “order of the multiplicative group in the field”.</p>
                                    <p class="graf graf--p graf-after--p">With real numbers, the <a
                                            href="https://en.wikipedia.org/wiki/Fundamental_theorem_of_algebra"
                                            class="markup--anchor markup--p-anchor"
                                    >Fundamental Theorem of Algebra</a> ensures that the
                                        quadratic extension that we call the complex numbers is “complete” — you cannot
                                        extend it further, because for any mathematical relationship (at least, any
                                        mathematical relationship defined by an algebraic formula) that you can come up
                                        with between some new element j and the existing complex numbers, it’s possible
                                        to come up with at least one complex number that already satisfies that
                                        relationship. With prime fields, however, we do not have this issue, and so we
                                        can go further and make cubic extensions (where the mathematical relationship
                                        between some new element w and existing field elements is a cubic equation, so
                                        1, w and w² are all linearly independent of each other), higher-order
                                        extensions, extensions of extensions, etc. And it is these kinds of supercharged
                                        modular complex numbers that elliptic curve pairings are built on.</p>
                                    <p class="graf graf--p graf-after--p graf--trailing">For those interested in seeing
                                        the exact math involved in making all of these operations written out in code,
                                        prime fields and field extensions are implemented here: <a
                                                href="https://github.com/ethereum/research/blob/master/zksnark/bn128_field_elements.py"
                                                class="markup--anchor markup--p-anchor"
                                        >https://github.com/ethereum/research/blob/master/zksnark/bn128_field_elements.py</a>
                                    </p>
                                    <p class="graf graf--p graf--leading">Now, on to elliptic curve pairings. An
                                        elliptic curve pairing (or rather, the specific form of pairing we’ll explore
                                        here; there are also other types of pairings, though their logic is fairly
                                        similar) is a map G2 x G1 -&gt; Gt, where:</p>
                                    <ul class="postList">
                                        <li class="graf graf--li graf-after--p"><strong
                                                class="markup--strong markup--li-strong">G1</strong> is an elliptic
                                            curve, where points satisfy an equation of the form y² = x³ + b, and where
                                            both coordinates are elements of F_p (ie. they are simple numbers, except
                                            arithmetic is all done modulo some prime number)
                                        </li>
                                        <li class="graf graf--li graf-after--li"><strong
                                                class="markup--strong markup--li-strong">G2</strong> is an elliptic
                                            curve, where points satisfy the same equation as G1, except where the
                                            coordinates are elements of F_p¹² (ie. they are the supercharged complex
                                            numbers we talked about above; we define a new “magic number” w, which is
                                            defined by a 12th degree polynomial like <code
                                                    class="markup--code markup--li-code">w^12 - 18 * w^6 + 82 = 0</code>)
                                        </li>
                                        <li class="graf graf--li graf-after--li"><strong
                                                class="markup--strong markup--li-strong">Gt </strong>is the type of
                                            object that the result of the elliptic curve goes into. In the curves that
                                            we look at, Gt is <strong
                                                    class="markup--strong markup--li-strong">F_p¹²</strong> (the same
                                            supercharged complex number as used in G2)
                                        </li>
                                    </ul>
                                    <p class="graf graf--p graf-after--li">The main property that it must satisfy is
                                        bilinearity, which in this context means that:</p>
                                    <ul class="postList">
                                        <li class="graf graf--li graf-after--p">e(P, Q + R) = e(P, Q) * e(P, R)</li>
                                        <li class="graf graf--li graf-after--li">e(P + Q, R) = e(P, R) * e(Q, R)</li>
                                    </ul>
                                    <p class="graf graf--p graf-after--li">There are two other important criteria:</p>
                                    <ul class="postList">
                                        <li class="graf graf--li graf-after--p"><strong
                                                class="markup--strong markup--li-strong">Efficient
                                            computability</strong> (eg. we can make an easy pairing by simply taking the
                                            discrete logarithms of all points and multiplying them together, but this is
                                            as computationally hard as breaking elliptic curve cryptography in the first
                                            place, so it doesn’t count)
                                        </li>
                                        <li class="graf graf--li graf-after--li"><strong
                                                class="markup--strong markup--li-strong">Non-degeneracy</strong> (sure,
                                            you could just define e(P, Q) = 1, but that’s not a particularly useful
                                            pairing)
                                        </li>
                                    </ul>
                                    <p class="graf graf--p graf-after--li graf--trailing">So how do we do this?</p>
                                    <p class="graf graf--p graf--leading">The math behind why pairing functions work is
                                        quite tricky and involves quite a bit of advanced algebra going even beyond what
                                        we’ve seen so far, but I’ll provide an outline. First of all, we need to define
                                        the concept of a <strong
                                                class="markup--strong markup--p-strong">divisor</strong>, basically an
                                        alternative way of representing functions on elliptic curve points. A divisor of
                                        a function basically counts the zeroes and the infinities of the function. To
                                        see what this means, let’s go through a few examples. Let us fix some point P =
                                        (P_x, P_y), and consider the following function:</p>
                                    <p class="graf graf--p graf-after--p">f(x, y) = x - P_x</p>
                                    <p class="graf graf--p graf-after--p">The divisor is [P] + [-P] - 2 * [O] (the
                                        square brackets are used to represent the fact that we are referring to <em
                                                class="markup--em markup--p-em">the presence of the point P in the set
                                            of zeroes and infinities of the function</em>, not the point P itself; [P] +
                                        [Q] is <strong class="markup--strong markup--p-strong">not</strong> the same
                                        thing as [P + Q]). The reasoning is as follows:</p>
                                    <ul class="postList">
                                        <li class="graf graf--li graf-after--p">The function is equal to zero at P,
                                            since x <em class="markup--em markup--li-em">is</em> P_x, so x - P_x = 0
                                        </li>
                                        <li class="graf graf--li graf-after--li">The function is equal to zero at -P,
                                            since -P and P share the same x coordinate
                                        </li>
                                        <li class="graf graf--li graf-after--li">The function goes to infinity as x goes
                                            to infinity, so we say the function is equal to infinity at O. There’s a
                                            technical reason why this infinity needs to be counted twice, so O gets
                                            added with a “multiplicity” of -2 (negative because it’s an infinity and not
                                            a zero, two because of this double counting).
                                        </li>
                                    </ul>
                                    <p class="graf graf--p graf-after--li">The technical reason is roughly this: because
                                        the equation of the curve is x³ = y² + b, y goes to infinity “1.5 times faster”
                                        than x does in order for y² to keep up with x³; hence, if a linear function
                                        includes only x then it is represented as an infinity of multiplicity 2, but if
                                        it includes y then it is represented as an infinity of multiplicity 3.</p>
                                    <p class="graf graf--p graf-after--p">Now, consider a “line function”:</p>
                                    <p class="graf graf--p graf-after--p">ax + by + c = 0</p>
                                    <p class="graf graf--p graf-after--p">Where a, b and c are carefully chosen so that
                                        the line passes through points P and Q. Because of how elliptic curve addition
                                        works (see the diagram at the top), this also means that it passes through -P-Q.
                                        And it goes up to infinity dependent on both x and y, so the divisor becomes
                                        [P]+ [Q] + [-P-Q] - 3 * [O].</p>
                                    <img class="graf--p graf-image"
                                         src="../images/knowledge/1-alHa7VxwcLoJk4C_YU9Iog(1).png" width="50%">

                                    <p class="graf graf--p graf-after--figure">We know that every “rational function”
                                        (ie. a function defined only using a finite number of +, -, * and / operations
                                        on the coordinates of the point) uniquely corresponds to some divisor, up to
                                        multiplication by a constant (ie. if two functions F and G have the same
                                        divisor, then F = G * k for some constant k).</p>
                                    <p class="graf graf--p graf-after--p">For any two functions F and G, the divisor of
                                        F * G is equal to the divisor of F plus the divisor of G (in math textbooks,
                                        you’ll see (F * G) = (F) + (G)), so for example if f(x, y) = P_x - x, then (f³)
                                        = 3 * [P] + 3 * [-P] - 6 * [O]; P and -P are “triple-counted” to account for the
                                        fact that f³ approaches 0 at those points “three times as quickly” in a certain
                                        mathematical sense.</p>
                                    <p class="graf graf--p graf-after--p">Note that there is a theorem that states that
                                        if you “remove the square brackets” from a divisor of a function, the points
                                        must add up to O ([P] + [Q] + [-P-Q] - 3 * [O] clearly fits, as P + Q - P - Q -
                                        3 * O = O), and any divisor that has this property is the divisor of a
                                        function.</p>
                                    <p class="graf graf--p graf-after--p">Now, we’re ready to look at Tate pairings.
                                        Consider the following functions, defined via their divisors:</p>
                                    <ul class="postList">
                                        <li class="graf graf--li graf-after--p">(F_P) = n * [P] - n * [O], where n is
                                            the order of G1, ie. n * P = O for any P
                                        </li>
                                        <li class="graf graf--li graf-after--li">(F_Q) = n * [Q] - n * [O]</li>
                                        <li class="graf graf--li graf-after--li">(g) = [P + Q] - [P] - [Q] + [O]</li>
                                    </ul>
                                    <p class="graf graf--p graf-after--li">Now, let’s look at the product F_P * F_Q *
                                        g^n. The divisor is:</p>
                                    <p class="graf graf--p graf-after--p">n * [P] - n * [O] + n * [Q] - n * [O] + n * [P
                                        + Q] - n * [P] - n * [Q] + n * [O]</p>
                                    <p class="graf graf--p graf-after--p">Which simplifies neatly to:</p>
                                    <p class="graf graf--p graf-after--p">n * [P + Q] - n * [O]</p>
                                    <p class="graf graf--p graf-after--p">Notice that this divisor is of exactly the
                                        same format as the divisor for F_P and F_Q above. Hence, F_P * F_Q * g^n = F_(P
                                        + Q).</p>
                                    <p class="graf graf--p graf-after--p">Now, we introduce a procedure called the
                                        “final exponentiation” step, where we take the result of our functions above
                                        (F_P, F_Q, etc.) and raise it to the power z = (p¹² - 1) / n, where p¹² - 1 is
                                        the order of the multiplicative group in F_p¹² (ie. for <em
                                                class="markup--em markup--p-em">any</em> x ϵ F_p¹², x^(p¹² - 1) = 1).
                                        Notice that if you apply this exponentiation to any result that has <em
                                                class="markup--em markup--p-em">already</em> been raised to the power of
                                        n, you get an exponentiation to the power of p¹² - 1, so the result turns into
                                        1. Hence, after final exponentiation, g^n cancels out and we get F_P^z * F_Q^z =
                                        F_(P + Q)^z. There’s some bilinearity for you.</p>
                                    <p class="graf graf--p graf-after--p">Now, if you want to make a function that’s
                                        bilinear in both arguments, you need to go into spookier math, where instead of
                                        taking F_P of a value directly, you take F_P of a <em
                                                class="markup--em markup--p-em">divisor</em>, and that’s where the full
                                        “Tate pairing” comes from. To prove some more results you have to deal with
                                        notions like “linear equivalence” and “Weil reciprocity”, and the rabbit hole
                                        goes on from there. You can find more reading material on all of this <a
                                                href="http://www.math.ru.nl/~bosma/Students/MScThesis_DennisMeffert.pdf"
                                                class="markup--anchor markup--p-anchor"
                                        >here</a> and <a
                                                href="http://people.cs.nctu.edu.tw/~rjchen/ECC2012S/Elliptic%20Curves%20Number%20Theory%20And%20Cryptography%202n.pdf"
                                                class="markup--anchor markup--p-anchor"
                                        >here</a>.</p>
                                    <p class="graf graf--p graf-after--p graf--trailing">For an implementation of a
                                        modified version of the Tate pairing, called the optimal Ate paring, <a
                                                href="https://github.com/ethereum/research/blob/master/zksnark/bn128_pairing.py"
                                                class="markup--anchor markup--p-anchor"
                                        >see here</a>. The code implements <a
                                                href="https://crypto.stanford.edu/pbc/notes/ep/miller.html"
                                                class="markup--anchor markup--p-anchor"
                                        >Miller’s algorithm</a>, which is needed to actually
                                        compute F_P.</p>
                                    <p class="graf graf--p graf--leading">Note that the fact pairings like this are
                                        possible is somewhat of a mixed blessing: on the one hand, it means that all the
                                        protocols we can do with pairings become possible, but is also means that we
                                        have to be more careful about what elliptic curves we use.</p>
                                    <p class="graf graf--p graf-after--p">Every elliptic curve has a value called an <em
                                            class="markup--em markup--p-em">embedding degree</em>; essentially, the
                                        smallest k such that p^k - 1 is a multiple of n (where p is the prime used for
                                        the field and n is the curve order). In the fields above, k = 12, and in the
                                        fields used for traditional ECC (ie. where we don’t care about pairings), the
                                        embedding degree is often extremely large, to the point that pairings are
                                        computationally infeasible to compute; however, if we are not careful then we
                                        can generate fields where k = 4 or even 1.</p>
                                    <p class="graf graf--p graf-after--p">If k = 1, then the “discrete logarithm”
                                        problem for elliptic curves (essentially, recovering p knowing only the point P
                                        = G * p, the problem that you have to solve to “crack” an elliptic curve private
                                        key) can be reduced into a similar math problem over F_p, where the problem
                                        becomes much easier (this is called the <a
                                                href="https://crypto.stanford.edu/pbc/notes/elliptic/movattack.html"
                                                class="markup--anchor markup--p-anchor"
                                        >MOV attack</a>); using curves with am embedding degree
                                        of 12 or higher ensures that this reduction is either unavailable, or that
                                        solving the discrete log problem over pairing results is at least as hard as
                                        recovering a private key from a public key “the normal way” (ie. computationally
                                        infeasible). Do not worry; all standard curve parameters have been thoroughly
                                        checked for this issue.</p>
                                    <p class="graf graf--p graf-after--p">Stay tuned for a mathematical explanation of
                                        how zk-SNARKs work, coming soon.</p>
                                    <p class="graf graf--p graf-after--p graf--trailing"><em
                                            class="markup--em markup--p-em">Special thanks to Christian Reitwiessner,
                                        Ariel Gabizon (from Zcash) and Alfred Menezes for reviewing and making
                                        corrections.</em></p>
                                </div>
                            </div>
                        </section>
                        <!--<section name="5e3a"class="section section&#45;&#45;body section&#45;&#45;last"></section>-->
                    </div>
                    <footer class="u-paddingTop30">
                        <div class="streamItem streamItem--placementCardGrid">
                            <div class="u-clearfix u-backgroundGrayLightest">
                                <div class="row u-marginAuto u-maxWidth1000 u-paddingTop30 u-paddingBottom20">

                                    <div class="col u-padding8 u-xs-size12of12 u-size4of12">
                                        <div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-sizeFullWidth u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4"
                                             data-scroll="native">
                                            <a class="link link--noUnderline "
                                               href="an_update_on_Integrating.html">
                                                <div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-sizeFullWidth u-borderBottomLight u-borderRadiusTop4"
                                                     style="background-image: url('../images/knowledge/z5-thumb.jpg');"></div>
                                            </a>
                                            <div class="u-padding15 u-borderBox u-flexColumn u-height180">
                                                <a class="link link--noUnderline u-flex1 "
                                                   href="an_update_on_Integrating.html">
                                                    <div class="ui-caption postMetaInline u-noWrapWithEllipsis u-marginBottom7">
                                                        Knowledge
                                                    </div>
                                                    <div class="ui-heading ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">
                                                        An Update on Integrating Zcash on Ethereum (ZoE)
                                                    </div>
                                                </a>
                                                <div class="u-paddingTop10 u-flex0 u-flexCenter">
                                                    <div class="u-flex1 u-minWidth0 u-marginRight10">
                                                        <div class="u-flexCenter">
                                                            <div class="postMetaInline-avatar u-flex0">
                                                                <!--<a class="link avatar u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                                                <img src="../images/knowledge/Christian-Reitwiessner.jpeg"
                                                                     class="avatar-image u-size36x36 u-xs-size32x32">
                                                                <!--</a>-->
                                                            </div>
                                                            <div class="postMetaInline postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis">
                                                                <!--<a class="link link link&#45;&#45;darken link&#45;&#45;darker u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                                                Christian Reitwiessner
                                                                <!--</a>-->
                                                                <div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal">
                                                                    <time>9 Mar, 2017</time>
                                                                    <!--<span class="readingTime u-textColorNormal" title="1 min read"></span>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col u-padding8 u-xs-size12of12 u-size4of12">
                                        <div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-sizeFullWidth u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4"
                                             data-scroll="native"><a
                                                class="link link--noUnderline "
                                                href="../news/ethereum_erc-20_token_standard.html">
                                            <div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-sizeFullWidth u-borderBottomLight u-borderRadiusTop4"
                                                 style="background-image: url('../images/news/w4-thumb.jpg');"></div>
                                        </a>
                                            <div class="u-padding15 u-borderBox u-flexColumn u-height180"><a
                                                    class="link link--noUnderline u-flex1 "
                                                    href="../news/ethereum_erc-20_token_standard.html">
                                                <div class="ui-caption postMetaInline u-noWrapWithEllipsis u-marginBottom7">
                                                    News
                                                </div>
                                                <div class="ui-heading ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">
                                                    Ethereum's ERC-20 Token Standard Has Been Finalized
                                                </div>
                                            </a>
                                                <div class="u-paddingTop10 u-flex0 u-flexCenter">
                                                    <div class="u-flex1 u-minWidth0 u-marginRight10">
                                                        <div class="u-flexCenter">
                                                            <div class="postMetaInline-avatar u-flex0">
                                                                <!--<a class="link avatar u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                                                <img src="../images/dog.jpg"
                                                                     class="avatar-image u-size36x36 u-xs-size32x32">
                                                                <!--</a>-->
                                                            </div>
                                                            <div class="postMetaInline postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis">
                                                                <!--<a class="link link link&#45;&#45;darken link&#45;&#45;darker u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                                                Qianxi
                                                                <!--</a>-->
                                                                <div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal">
                                                                    <time>11 Sept, 2017</time>
                                                                    <!--<span class="readingTime u-textColorNormal" title="1 min read"></span>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col u-padding8 u-xs-size12of12 u-size4of12">
                                        <div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-sizeFullWidth u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4"
                                             data-scroll="native">
                                            <a class="link link--noUnderline "
                                               href="explaining_the_ethereum_namespace_auction.html">
                                                <div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-sizeFullWidth u-borderBottomLight u-borderRadiusTop4"
                                                     style="background-image: url('../images/knowledge/information_technology_767x400.jpg');"></div>
                                            </a>
                                            <div class="u-padding15 u-borderBox u-flexColumn u-height180">
                                                <a class="link link--noUnderline u-flex1 "
                                                   href="explaining_the_ethereum_namespace_auction.html">
                                                    <div class="ui-caption postMetaInline u-noWrapWithEllipsis u-marginBottom7">
                                                        Knowledge
                                                    </div>
                                                    <div class="ui-heading ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">
                                                        Explaining The Ethereum Namespace Auction
                                                    </div>
                                                </a>
                                                <div class="u-paddingTop10 u-flex0 u-flexCenter">
                                                    <div class="u-flex1 u-minWidth0 u-marginRight10">
                                                        <div class="u-flexCenter">
                                                            <div class="postMetaInline-avatar u-flex0">
                                                                <!--<a class="link avatar u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                                                <img src="../images/knowledge/1-AW1mbHWcIh7sSOj4XJboOw(2).jpeg"
                                                                     class="avatar-image u-size36x36 u-xs-size32x32">
                                                                <!--</a>-->
                                                            </div>
                                                            <div class="postMetaInline postMetaInline-authorLockup u-flex1 u-noWrapWithEllipsis">
                                                                <!--<a class="link link link&#45;&#45;darken link&#45;&#45;darker u-baseColor&#45;&#45;link ui-linkSubtle" href="#">-->
                                                                Maurelian
                                                                <!--</a>-->
                                                                <div class="u-fontSize12 u-baseColor--textNormal u-textColorNormal">
                                                                    <time>25 Oct, 2017</time>
                                                                    <!--<span class="readingTime u-textColorNormal" title="1 min read"></span>-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="u-textAlignCenter u-paddingBottom20 u-xs-fontSize10">&copy; UNITIMES. All
                                    Rights Reserved.
                                </div>
                            </div>
                        </div>
                    </footer>
                </article>
            </main>
        </div>
    </div>
</div>
<div class="surface-scrollOverlay"></div>
</body>

</html>